/*!
 * build: 杭州数蛙科技有限公司 
 *  copyright: dgiot 
 *  project : dgiot-jiande 
 *  version : 0.0.2 
 *  description : dgiot-jiande 脚手架 
 *  author: h7ml(h7ml@qq.com) 
 *  time:Sun Jul 03 2022 16:02:30 GMT+0800 (China Standard Time)
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{Gb9O:function(e,l,t){"use strict";t.r(l),t.d(l,"schema",(function(){return N}));t("07d7"),t("FZtP");var a=t("ejTr"),i=t.n(a),d=t("CvqZ"),o=t.n(d),n=t("8Vev"),x=t.n(n),h=t("NDYa"),r=t.n(h),b=t("aNQX"),g=t.n(b),m=t("04Ix"),p=t.n(m),s=t("TSYQ"),u=t.n(s),w=t("p46w"),c=t.n(w),f=t("w5tg");t("c+yx");function v(e,l){var t=i()(e);if(o.a){var a=o()(e);l&&(a=x()(a).call(a,(function(l){return r()(e,l).enumerable}))),t.push.apply(t,a)}return t}function y(e){for(var l=1;l<arguments.length;l++){var t=null!=arguments[l]?arguments[l]:{};l%2?v(Object(t),!0).forEach((function(l){p()(e,l,t[l])})):g.a?Object.defineProperties(e,g()(t)):v(Object(t)).forEach((function(l){Object.defineProperty(e,l,r()(t,l))}))}return e}var N={type:"page",data:{userid:window.location},body:[{type:"grid",columns:[{md:12,body:[{mode:"inline",name:"title",type:"static",label:"派发工单管理",labelClassName:"text-lg p-md font-bold"}],columnClassName:"bg-white"},{body:[{type:"crud",mode:"table",api:{method:"get",url:"/iotapi/classes/Device",adaptor:function(e,l,t){return console.log("payloadtree",e),{data:{count:e.data.count,rows:e.data.rows},status:0,msg:"ok"}}},defaultParams:{skip:1,limit:10,order:"-updatedAt",count:"objectId",where:{product:"ec71804a3d"}},pageField:"skip",perPageField:"limit",filter:{body:[{mode:"inline",name:"where.devaddr.$regex",size:"md",type:"input-text",placeholder:"按单据编号查询"},{name:"where.name.$regex",type:"input-text",size:"md",placeholder:"按物料名称查询"},{name:"where.content.Documents_state",type:"input-text",placeholder:"审核状态查询",size:"md"},{label:"查询",level:"primary",type:"submit",size:"md"},{label:"重置",type:"reset",size:"md"}],title:"",submitText:""},columns:[{name:"devaddr",label:"单据编号"},{name:"content.Type_of_document",label:"单据类型"},{name:"content.Document_date",label:"单据日期",width:120},{name:"content.DeviceName",label:"物料名称",popOver:{trigger:"hover",showIcon:!1,body:"${content.DeviceName}",popOverClassName:"min-w-0"},className:"overflow-hidden white-space-nowrap text-overflow-ellipsis",width:125},{name:"content.Product_type",label:"产品类型"},{name:"content.Number",label:"生产数量"},{name:"content.jdinfo.isstart",type:"mapping",label:"工单生产状态",map:{"已完成":"<span class='label label-info'>已完成</span>","合格":"<span class='label label-success'>合格</span>","加工中":"<span class='label label-warning'>加工中</span>","*":"<span class='label label-danger'>未开始</span>"}},{name:"content.jdinfo.taskstart",label:"任务开工时间"},{name:"content.jdinfo.taskend",label:"任务完工时间"},{name:"content.jdinfo.mhour",label:"工期"},{name:"content.jdinfo.dcheck",label:"审核状态",type:"mapping",map:{"待审核":"<span class='label label-info'>待审核</span>","合格":"<span class='label label-success'>合格</span>","不合格":"<span class='label label-danger'>不合格</span>"}},{type:"operation",label:"操作",buttons:[{type:"button",label:"查看",drawer:{body:{body:[{name:"devaddr",type:"static",label:"单据编号",labelClassName:"font-bold"},{name:"content.Material_code",type:"static",label:"物料编号",searchable:!0,extractValue:!0,labelClassName:"font-bold"},{name:"content.DeviceName",type:"static",label:"物料名称",labelField:"label",valueField:"label",selectMode:"tree",labelClassName:"font-bold",required:!0},{name:"content.Number",type:"static",label:"计划生产数量",labelClassName:"font-bold"},{name:"content.jdinfo.process",type:"static",label:"实际生产数量",labelClassName:"font-bold"},{name:"content.jdinfo.isstart",type:"static",label:"任务状态",labelClassName:"font-bold"},{name:"content.jdinfo.taskstart",type:"static",label:"任务开始时间",labelClassName:"font-bold"},{name:"content.jdinfo.taskend",type:"static",label:"任务结束时间",labelClassName:"font-bold"}],type:"form"},title:"查看"},actionType:"drawer"},{api:{method:"delete",url:"/iotapi/amis/Device/${objectId}",headers:{sessionToken:c.a.get("authorization")}},type:"button",label:"删除",level:"danger",actionType:"ajax",confirmText:"确认要删除？"},{type:"button",label:"出库",level:"success",actionType:"dialog",dialog:{title:"订单出库",body:{type:"form",className:u()(f.b.flex_label5x),api:{method:"put",url:"/iotapi/amis/Device1/${objectId}",requestAdaptor:function(e){console.log("api.data",e.data);var l={};l["role:"+e.data.dept]={read:!0,write:!0};var t=e.data.content;return t.personel=e.data.dept,y(y({},e),{},{data:{content:t,ACL:l,detail:{payout:"已派发"},devaddr:"工厂_devaddr_".concat((new Date).getTime()),isEnable:!0,name:"工厂_name_".concat((new Date).getTime()),profile:{},route:{},product:{className:"Product",objectId:"ec71804a3d",__type:"Pointer"}}})}},controls:[{type:"static",name:"devaddr",label:"单据编号"},{name:"ACL",type:"input-text",visibleOn:"false",label:"权限"},{label:"审核",type:"select",name:"isaudit",options:[{label:"合格",value:"合格"},{label:"不合格",value:"不合格"}],required:!0},{label:"审核意见",type:"input-text",name:"objection",value:"合格通过"},{name:"dept",type:"nested-select",label:"派发人员",labelField:"label",valueField:"value",selectMode:"tree",source:{method:"get",url:"/iotapi/usertree",adaptor:function(e,l,t){return console.log("payloadtree",e),console.log("转换树options",e.data.options),y(y({},e),{},{status:0,msg:"ok"})},responseData:{options:"${options|pick:label~label,value~value,children~children}"}},required:!0}]}},visibleOn:"content.jdinfo.dcheck=='待审核'"},{type:"button",label:"任务",level:"info",drawer:{body:{body:[{mode:"inline",name:"title",type:"static",label:"成品信息详情",labelClassName:"text-lg p-md font-bold"},{type:"crud",source:"${content.jdinfo.ctaskList}",syncLocation:!1,headerToolbar:["export-excel"],columns:[{name:"cdate",label:"日期",groupName:"${devaddr}"},{name:"dingdan",label:"订单号",groupName:"${devaddr}"},{name:"mhour",label:"工长",groupName:"${devaddr}"},{name:"prom",label:"产品型号",groupName:"${devaddr}"},{name:"ymodel",label:"原料型号",groupName:"${devaddr}"},{name:"prostand",label:"产品规格",groupName:"${devaddr}"},{name:"packspec",label:"包装规格",groupName:"${devaddr}"},{name:"pnumber",label:"生产数量",groupName:"${devaddr}"},{name:"rejects",label:"不良品",groupName:"${devaddr}"},{name:"smater",label:"上级原料",groupName:"${devaddr}"},{name:"ymater",label:"剩料",groupName:"${devaddr}"},{name:"fmater",label:"废料",groupName:"${devaddr}"},{name:"machine",label:"机台",groupName:"${devaddr}"},{name:"people",label:"人员",groupName:"${devaddr}"},{name:"subtime",label:"提交时间",groupName:"${devaddr}"}]},{mode:"inline",name:"title1",type:"static",label:"半成品信息详情",value:"",labelClassName:"text-lg p-md font-bold"},{type:"crud",source:"${content.jdinfo.btaskList}",syncLocation:!1,headerToolbar:["export-excel"],columns:[{name:"bdate",label:"日期",groupName:"${devaddr}"},{name:"dingdan",label:"订单号",groupName:"${devaddr}"},{name:"prom",label:"产品型号",groupName:"${devaddr}"},{name:"bprom",label:"半成品型号",groupName:"${devaddr}"},{name:"ymodel",label:"原料型号",groupName:"${devaddr}"},{name:"prostand",label:"产品规格",groupName:"${devaddr}"},{name:"packspec",label:"包装规格",groupName:"${devaddr}"},{name:"pnumber",label:"生产数量",groupName:"${devaddr}"},{name:"rejects",label:"不良品",groupName:"${devaddr}"},{name:"smater",label:"上机原料",groupName:"${devaddr}"},{name:"ymater",label:"剩料",groupName:"${devaddr}"},{name:"fmater",label:"废料",groupName:"${devaddr}"},{name:"machine",label:"机台",groupName:"${devaddr}"},{name:"people",label:"人员",groupName:"${devaddr}"}]}],type:"form"},size:"xl",title:"查看任务详情"},actionType:"drawer"}]}],headerToolbar:[],footerToolbar:[{align:"left",type:"pagination"},{align:"left",type:"statistics"}],alwaysShowPagination:!0,syncLocation:!1}]}]}],style:{backgroundColor:""},messages:{}}},w5tg:function(e,l,t){"use strict";var a,i,d,o,n,x;t.d(l,"c",(function(){return a})),t.d(l,"e",(function(){return i})),t.d(l,"d",(function(){return d})),t.d(l,"b",(function(){return n})),t.d(l,"a",(function(){return x})),function(e){e.Inline_Block="global-inline-block",e.MB_None="mb-none"}(a||(a={})),function(e){e.width_full="global-width-full",e.width_unset="global-width-unset",e.width1x="global-width-1x",e.width2x="global-width-2x",e.width3x="global-width-3x",e.width4x="global-width-4x",e.width5x="global-width-5x",e.width6x="global-width-6x",e.width7x="global-width-7x",e.width8x="global-width-8x",e.width9x="global-width-9x",e.width10x="global-width-10x",e.width11x="global-width-11x",e.width12x="global-width-12x",e.width13x="global-width-13x",e.width14x="global-width-14x",e.width15x="global-width-15x",e.width16x="global-width-16x",e.width17x="global-width-17x",e.width18x="global-width-18x",e.width19x="global-width-19x",e.width20x="global-width-20x",e.width21x="global-width-21x",e.width22x="global-width-22x",e.width23x="global-width-23x",e.width24x="global-width-24x",e.width25x="global-width-25x",e.width26x="global-width-26x",e.width27x="global-width-27x",e.width28x="global-width-28x",e.width29x="global-width-29x",e.width30x="global-width-30x",e.width31x="global-width-31x",e.width32x="global-width-32x",e.width33x="global-width-33x",e.width34x="global-width-34x",e.width35x="global-width-35x",e.width36x="global-width-36x",e.width37x="global-width-37x",e.width38x="global-width-38x",e.width39x="global-width-39x",e.width40x="global-width-40x",e.width41x="global-width-41x",e.width42x="global-width-42x",e.width43x="global-width-43x",e.width44x="global-width-44x",e.width45x="global-width-45x",e.width46x="global-width-46x",e.width47x="global-width-47x",e.width48x="global-width-48x"}(i||(i={})),function(e){e.height_full="global-height-full",e.height_unset="global-height-unset",e.height1x="global-height-1x",e.height2x="global-height-2x",e.height3x="global-height-3x",e.height4x="global-height-4x",e.height5x="global-height-5x",e.height6x="global-height-6x",e.height7x="global-height-7x",e.height8x="global-height-8x",e.height9x="global-height-9x",e.height10x="global-height-10x",e.height11x="global-height-11x",e.height12x="global-height-12x",e.height13x="global-height-13x",e.height14x="global-height-14x",e.height15x="global-height-15x",e.height16x="global-height-16x",e.height17x="global-height-17x",e.height18x="global-height-18x",e.height19x="global-height-19x",e.height20x="global-height-20x",e.height21x="global-height-21x",e.height22x="global-height-22x",e.height23x="global-height-23x",e.height24x="global-height-24x"}(d||(d={})),o||(o={}),function(e){e.label2x="form-label-2x",e.label3x="form-label-3x",e.label4x="form-label-4x",e.label5x="form-label-5x",e.label6x="form-label-6x",e.label7x="form-label-7x",e.label8x="form-label-8x",e.label9x="form-label-9x",e.label10x="form-label-10x",e.input10x="form-input-10x",e.input12x="form-input-12x",e.input14x="form-input-14x",e.input16x="form-input-16x",e.input18x="form-input-18x",e.input20x="form-input-20x",e.input22x="form-input-22x",e.input24x="form-input-24x",e.input26x="form-input-26x",e.input28x="form-input-28x",e.input30x="form-input-30x",e.input32x="form-input-32x",e.flex_label2x="flex-form-label-2x",e.flex_label3x="flex-form-label-3x",e.flex_label4x="flex-form-label-4x",e.flex_label5x="flex-form-label-5x",e.flex_label6x="flex-form-label-6x",e.flex_label7x="flex-form-label-7x",e.flex_label8x="flex-form-label-8x",e.flex_label9x="flex-form-label-9x",e.flex_label10x="flex-form-label-10x",e.flex_label12x="flex-form-label-12x",e.flex_label14x="flex-form-label-14x",e.flex_label16x="flex-form-label-16x",e.flex_input10x="flex-form-input-10x",e.flex_input12x="flex-form-input-12x",e.flex_input14x="flex-form-input-14x",e.flex_input16x="flex-form-input-16x",e.flex_input18x="flex-form-input-18x",e.flex_input20x="flex-form-input-20x",e.flex_input22x="flex-form-input-22x",e.flex_input24x="flex-form-input-24x",e.flex_input26x="flex-form-input-26x",e.flex_input28x="flex-form-input-28x",e.flex_input30x="flex-form-input-30x",e.flex_input32x="flex-form-input-32x",e.item_height2_5x="form-item-height-2_5x",e.item_height3_5x="form-item-height-3_5x"}(n||(n={})),function(e){e.width10x="dialog-width-10x",e.width15x="dialog-width-15x",e.width20x="dialog-width-20x",e.width25x="dialog-width-25x",e.width30x="dialog-width-30x",e.width35x="dialog-width-35x",e.width40x="dialog-width-40x",e.width45x="dialog-width-45x",e.width50x="dialog-width-50x",e.width55x="dialog-width-55x",e.width60x="dialog-width-60x",e.width65x="dialog-width-65x",e.width70x="dialog-width-70x",e.width75x="dialog-width-75x",e.width80x="dialog-width-80x",e.width85x="dialog-width-85x",e.width90x="dialog-width-90x",e.width95x="dialog-width-95x",e.width100x="dialog-width-100x",e.width105x="dialog-width-105x",e.width110x="dialog-width-110x",e.width115x="dialog-width-115x",e.width120x="dialog-width-120x",e.width125x="dialog-width-125x",e.width130x="dialog-width-130x",e.width135x="dialog-width-135x",e.width140x="dialog-width-140x",e.width145x="dialog-width-145x",e.width150x="dialog-width-150x"}(x||(x={}))}}]);